<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>L4Re – L4 Runtime Environment: L4virtio::Driver::Block_device Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="l4re.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">L4Re – L4 Runtime Environment
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classL4virtio_1_1Driver_1_1Block__device.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">L4virtio::Driver::Block_device Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Simple class for accessing a virtio block device synchronously.  
 <a href="classL4virtio_1_1Driver_1_1Block__device.html#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for L4virtio::Driver::Block_device:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Block__device__inherit__graph.svg" width="194" height="522"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for L4virtio::Driver::Block_device:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Block__device__coll__graph.svg" width="315" height="1355"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Block__device_1_1Handle.html">Handle</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classL4virtio_1_1Driver_1_1Block__device_1_1Handle.html" title="Handle to an ongoing request.">Handle</a> to an ongoing request.  <a href="classL4virtio_1_1Driver_1_1Block__device_1_1Handle.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a688df51bdec4ba327a6c0b48a83a115a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Block__device.html#a688df51bdec4ba327a6c0b48a83a115a">setup_device</a> (<a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="classL4virtio_1_1Device.html">L4virtio::Device</a> &gt; srvcap, <a class="el" href="arm_2l4_2sys_2l4int_8h.html#a08c1e83a068ded7add134b188cd44967">l4_size_t</a> usermem, void **userdata, <a class="el" href="classL4virtio_1_1Ptr.html">Ptr</a>&lt; void &gt; &amp;user_devaddr, <a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> fmask0=-1U, <a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> fmask1=-1U)</td></tr>
<tr class="memdesc:a688df51bdec4ba327a6c0b48a83a115a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup a connection to a device and set up shared memory.  <a href="classL4virtio_1_1Driver_1_1Block__device.html#a688df51bdec4ba327a6c0b48a83a115a">More...</a><br /></td></tr>
<tr class="separator:a688df51bdec4ba327a6c0b48a83a115a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9e6f5dc74a5c0c11dc842df598342bc"><td class="memItemLeft" align="right" valign="top"><a id="af9e6f5dc74a5c0c11dc842df598342bc"></a>
<a class="el" href="structl4virtio__block__config__t.html">l4virtio_block_config_t</a> const  &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Block__device.html#af9e6f5dc74a5c0c11dc842df598342bc">device_config</a> () const</td></tr>
<tr class="memdesc:af9e6f5dc74a5c0c11dc842df598342bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a reference to the device configuration. <br /></td></tr>
<tr class="separator:af9e6f5dc74a5c0c11dc842df598342bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdd043c2adbca7fea5eb057f9aa4b483"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classL4virtio_1_1Driver_1_1Block__device_1_1Handle.html">Handle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Block__device.html#afdd043c2adbca7fea5eb057f9aa4b483">start_request</a> (<a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> sector, <a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> type, Callback callback)</td></tr>
<tr class="memdesc:afdd043c2adbca7fea5eb057f9aa4b483"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the setup of a new request.  <a href="classL4virtio_1_1Driver_1_1Block__device.html#afdd043c2adbca7fea5eb057f9aa4b483">More...</a><br /></td></tr>
<tr class="separator:afdd043c2adbca7fea5eb057f9aa4b483"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53ec612b1d207804102e34d51f6016cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Block__device.html#a53ec612b1d207804102e34d51f6016cc">add_block</a> (<a class="el" href="classL4virtio_1_1Driver_1_1Block__device_1_1Handle.html">Handle</a> handle, <a class="el" href="classL4virtio_1_1Ptr.html">Ptr</a>&lt; void &gt; addr, <a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> size)</td></tr>
<tr class="memdesc:a53ec612b1d207804102e34d51f6016cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a data block to a request that has already been set up.  <a href="classL4virtio_1_1Driver_1_1Block__device.html#a53ec612b1d207804102e34d51f6016cc">More...</a><br /></td></tr>
<tr class="separator:a53ec612b1d207804102e34d51f6016cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c2e9924abafe2eff34821b166c6c36f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Block__device.html#a2c2e9924abafe2eff34821b166c6c36f">send_request</a> (<a class="el" href="classL4virtio_1_1Driver_1_1Block__device_1_1Handle.html">Handle</a> handle)</td></tr>
<tr class="memdesc:a2c2e9924abafe2eff34821b166c6c36f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process request asynchronously.  <a href="classL4virtio_1_1Driver_1_1Block__device.html#a2c2e9924abafe2eff34821b166c6c36f">More...</a><br /></td></tr>
<tr class="separator:a2c2e9924abafe2eff34821b166c6c36f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63f21e71556accc8c669ef80161ecd8e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Block__device.html#a63f21e71556accc8c669ef80161ecd8e">process_request</a> (<a class="el" href="classL4virtio_1_1Driver_1_1Block__device_1_1Handle.html">Handle</a> handle)</td></tr>
<tr class="memdesc:a63f21e71556accc8c669ef80161ecd8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process request synchronously.  <a href="classL4virtio_1_1Driver_1_1Block__device.html#a63f21e71556accc8c669ef80161ecd8e">More...</a><br /></td></tr>
<tr class="separator:a63f21e71556accc8c669ef80161ecd8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f1a7a08e90ca6c1441bd48abc8b574a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Block__device.html#a9f1a7a08e90ca6c1441bd48abc8b574a">process_used_queue</a> ()</td></tr>
<tr class="memdesc:a9f1a7a08e90ca6c1441bd48abc8b574a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process and free all items in the used queue.  <a href="classL4virtio_1_1Driver_1_1Block__device.html#a9f1a7a08e90ca6c1441bd48abc8b574a">More...</a><br /></td></tr>
<tr class="separator:a9f1a7a08e90ca6c1441bd48abc8b574a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classL4virtio_1_1Driver_1_1Device"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classL4virtio_1_1Driver_1_1Device')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classL4virtio_1_1Driver_1_1Device.html">L4virtio::Driver::Device</a></td></tr>
<tr class="memitem:a4f8b3d73188c3b6664755b81b80e441c inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a4f8b3d73188c3b6664755b81b80e441c">driver_connect</a> (<a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="classL4virtio_1_1Device.html">L4virtio::Device</a> &gt; srvcap, bool manage_notify=true)</td></tr>
<tr class="memdesc:a4f8b3d73188c3b6664755b81b80e441c inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contacts the device and starts the initial handshake.  <a href="classL4virtio_1_1Driver_1_1Device.html#a4f8b3d73188c3b6664755b81b80e441c">More...</a><br /></td></tr>
<tr class="separator:a4f8b3d73188c3b6664755b81b80e441c inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c9b791b723e7e8ad2eae927094b487d inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a1c9b791b723e7e8ad2eae927094b487d">bind_notification_irq</a> (unsigned index, <a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="structL4_1_1Triggerable.html">L4::Triggerable</a> &gt; irq) const</td></tr>
<tr class="memdesc:a1c9b791b723e7e8ad2eae927094b487d inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a triggerable to receive notifications from the device.  <a href="classL4virtio_1_1Driver_1_1Device.html#a1c9b791b723e7e8ad2eae927094b487d">More...</a><br /></td></tr>
<tr class="separator:a1c9b791b723e7e8ad2eae927094b487d inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77b6e19eee76b71efd0065e62f71190d inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memItemLeft" align="right" valign="top"><a id="a77b6e19eee76b71efd0065e62f71190d"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a77b6e19eee76b71efd0065e62f71190d">fail_state</a> () const</td></tr>
<tr class="memdesc:a77b6e19eee76b71efd0065e62f71190d inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if the device is in a fail state. <br /></td></tr>
<tr class="separator:a77b6e19eee76b71efd0065e62f71190d inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af06d27e63124749456ddc8d959231741 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#af06d27e63124749456ddc8d959231741">driver_acknowledge</a> ()</td></tr>
<tr class="memdesc:af06d27e63124749456ddc8d959231741 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalize handshake with the device.  <a href="classL4virtio_1_1Driver_1_1Device.html#af06d27e63124749456ddc8d959231741">More...</a><br /></td></tr>
<tr class="separator:af06d27e63124749456ddc8d959231741 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a5c440b8353e0bd030a552334e7e5a3 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a7a5c440b8353e0bd030a552334e7e5a3">register_ds</a> (<a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="classL4Re_1_1Dataspace.html">L4Re::Dataspace</a> &gt; ds, <a class="el" href="group__l4__basic__types.html#ga1c2c4b333f75b1d05b59855910f2b9cb">l4_umword_t</a> offset, <a class="el" href="group__l4__basic__types.html#ga1c2c4b333f75b1d05b59855910f2b9cb">l4_umword_t</a> size, <a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> *devaddr)</td></tr>
<tr class="memdesc:a7a5c440b8353e0bd030a552334e7e5a3 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Share a dataspace with the device.  <a href="classL4virtio_1_1Driver_1_1Device.html#a7a5c440b8353e0bd030a552334e7e5a3">More...</a><br /></td></tr>
<tr class="separator:a7a5c440b8353e0bd030a552334e7e5a3 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa557ba0e56fbfc194b07440ecc796061 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#aa557ba0e56fbfc194b07440ecc796061">config_queue</a> (int num, unsigned size, <a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> desc_addr, <a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> avail_addr, <a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> used_addr)</td></tr>
<tr class="memdesc:aa557ba0e56fbfc194b07440ecc796061 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the virtqueue configuration to the device.  <a href="classL4virtio_1_1Driver_1_1Device.html#aa557ba0e56fbfc194b07440ecc796061">More...</a><br /></td></tr>
<tr class="separator:aa557ba0e56fbfc194b07440ecc796061 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07dd8cdbc1ce12dca8af6a540463ae23 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a07dd8cdbc1ce12dca8af6a540463ae23">max_queue_size</a> (int num) const</td></tr>
<tr class="memdesc:a07dd8cdbc1ce12dca8af6a540463ae23 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum queue size allowed by the device.  <a href="classL4virtio_1_1Driver_1_1Device.html#a07dd8cdbc1ce12dca8af6a540463ae23">More...</a><br /></td></tr>
<tr class="separator:a07dd8cdbc1ce12dca8af6a540463ae23 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4aa9ac34ce928b9d437f1bb6a2ec216 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#af4aa9ac34ce928b9d437f1bb6a2ec216">send_and_wait</a> (<a class="el" href="classL4virtio_1_1Driver_1_1Virtqueue.html">Virtqueue</a> &amp;queue, <a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a> descno)</td></tr>
<tr class="memdesc:af4aa9ac34ce928b9d437f1bb6a2ec216 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a request to the device and wait for it to be processed.  <a href="classL4virtio_1_1Driver_1_1Device.html#af4aa9ac34ce928b9d437f1bb6a2ec216">More...</a><br /></td></tr>
<tr class="separator:af4aa9ac34ce928b9d437f1bb6a2ec216 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05a02d57ddf646f029311ca8a63f4081 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a05a02d57ddf646f029311ca8a63f4081">wait</a> (int index) const</td></tr>
<tr class="memdesc:a05a02d57ddf646f029311ca8a63f4081 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for a notification from the device.  <a href="classL4virtio_1_1Driver_1_1Device.html#a05a02d57ddf646f029311ca8a63f4081">More...</a><br /></td></tr>
<tr class="separator:a05a02d57ddf646f029311ca8a63f4081 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a156576a5d43ef2fe11b39f4d8ffc4c9e inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a156576a5d43ef2fe11b39f4d8ffc4c9e">wait_for_next_used</a> (<a class="el" href="classL4virtio_1_1Driver_1_1Virtqueue.html">Virtqueue</a> &amp;queue) const</td></tr>
<tr class="memdesc:a156576a5d43ef2fe11b39f4d8ffc4c9e inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for the next item to arrive in the used queue and return it.  <a href="classL4virtio_1_1Driver_1_1Device.html#a156576a5d43ef2fe11b39f4d8ffc4c9e">More...</a><br /></td></tr>
<tr class="separator:a156576a5d43ef2fe11b39f4d8ffc4c9e inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72090d324268b51f3937197748c26853 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a72090d324268b51f3937197748c26853">send</a> (<a class="el" href="classL4virtio_1_1Driver_1_1Virtqueue.html">Virtqueue</a> &amp;queue, <a class="el" href="group__l4__basic__types.html#gae8d67914f723bf843df6f311ad2619a2">l4_uint16_t</a> descno)</td></tr>
<tr class="memdesc:a72090d324268b51f3937197748c26853 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a request to the device.  <a href="classL4virtio_1_1Driver_1_1Device.html#a72090d324268b51f3937197748c26853">More...</a><br /></td></tr>
<tr class="separator:a72090d324268b51f3937197748c26853 inherit pub_methods_classL4virtio_1_1Driver_1_1Device"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Simple class for accessing a virtio block device synchronously. </p>

<p class="definition">Definition at line <a class="el" href="client_2virtio-block_source.html#l00346">346</a> of file <a class="el" href="client_2virtio-block_source.html">virtio-block</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a53ec612b1d207804102e34d51f6016cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53ec612b1d207804102e34d51f6016cc">&#9670;&nbsp;</a></span>add_block()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Driver::Block_device::add_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classL4virtio_1_1Driver_1_1Block__device_1_1Handle.html">Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classL4virtio_1_1Ptr.html">Ptr</a>&lt; void &gt;&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a data block to a request that has already been set up. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td><a class="el" href="classL4virtio_1_1Driver_1_1Block__device_1_1Handle.html" title="Handle to an ongoing request.">Handle</a> to request previously set up with <a class="el" href="classL4virtio_1_1Driver_1_1Block__device.html#afdd043c2adbca7fea5eb057f9aa4b483" title="Start the setup of a new request.">start_request()</a>. </td></tr>
    <tr><td class="paramname">addr</td><td>Address of data block in device address space. </td></tr>
    <tr><td class="paramname">size</td><td>Size of data block.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">L4_OK</td><td>Block was sucessfully added. </td></tr>
    <tr><td class="paramname">-L4_EAGAIN</td><td>No descriptors available. Try again later. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="client_2virtio-block_source.html#l00524">524</a> of file <a class="el" href="client_2virtio-block_source.html">virtio-block</a>.</p>

<p class="reference">References <a class="el" href="virtqueue_source.html#l00117">L4virtio::Virtqueue::Desc::addr</a>, <a class="el" href="virtqueue_source.html#l00563">L4virtio::Driver::Virtqueue::alloc_descriptor()</a>, <a class="el" href="virtqueue_source.html#l00595">L4virtio::Driver::Virtqueue::desc()</a>, <a class="el" href="virtqueue_source.html#l00119">L4virtio::Virtqueue::Desc::flags</a>, <a class="el" href="err_8h_source.html#l00049">L4_EAGAIN</a>, <a class="el" href="err_8h_source.html#l00043">L4_EOK</a>, <a class="el" href="virtqueue_source.html#l00118">L4virtio::Virtqueue::Desc::len</a>, <a class="el" href="virtqueue_source.html#l00110">L4virtio::Virtqueue::Desc::Flags::next()</a>, <a class="el" href="virtqueue_source.html#l00120">L4virtio::Virtqueue::Desc::next</a>, <a class="el" href="virtqueue_source.html#l00103">L4virtio::Virtqueue::Desc::Flags::raw</a>, <a class="el" href="virtio__block_8h_source.html#l00056">l4virtio_block_header_t::type</a>, and <a class="el" href="virtqueue_source.html#l00112">L4virtio::Virtqueue::Desc::Flags::write()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Block__device_a53ec612b1d207804102e34d51f6016cc_cgraph.svg" width="412" height="248"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a63f21e71556accc8c669ef80161ecd8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63f21e71556accc8c669ef80161ecd8e">&#9670;&nbsp;</a></span>process_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Driver::Block_device::process_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classL4virtio_1_1Driver_1_1Block__device_1_1Handle.html">Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process request synchronously. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>Request to send to the device</td></tr>
  </table>
  </dd>
</dl>
<p>Sends a request to the driver that was previously set up with <a class="el" href="classL4virtio_1_1Driver_1_1Block__device.html#afdd043c2adbca7fea5eb057f9aa4b483" title="Start the setup of a new request.">start_request()</a> and <a class="el" href="classL4virtio_1_1Driver_1_1Block__device.html#a53ec612b1d207804102e34d51f6016cc" title="Add a data block to a request that has already been set up.">add_block()</a> and wait for it to be executed. </p>

<p class="definition">Definition at line <a class="el" href="client_2virtio-block_source.html#l00595">595</a> of file <a class="el" href="client_2virtio-block_source.html">virtio-block</a>.</p>

<p class="reference">References <a class="el" href="virtqueue_source.html#l00117">L4virtio::Virtqueue::Desc::addr</a>, <a class="el" href="virtqueue_source.html#l00563">L4virtio::Driver::Virtqueue::alloc_descriptor()</a>, <a class="el" href="virtqueue_source.html#l00595">L4virtio::Driver::Virtqueue::desc()</a>, <a class="el" href="virtqueue_source.html#l00119">L4virtio::Virtqueue::Desc::flags</a>, <a class="el" href="err_8h_source.html#l00056">L4_EINVAL</a>, <a class="el" href="err_8h_source.html#l00046">L4_EIO</a>, <a class="el" href="err_8h_source.html#l00060">L4_ENOSYS</a>, <a class="el" href="err_8h_source.html#l00043">L4_EOK</a>, <a class="el" href="virtio__block_8h_source.html#l00047">L4VIRTIO_BLOCK_S_IOERR</a>, <a class="el" href="virtio__block_8h_source.html#l00046">L4VIRTIO_BLOCK_S_OK</a>, <a class="el" href="virtio__block_8h_source.html#l00048">L4VIRTIO_BLOCK_S_UNSUPP</a>, <a class="el" href="virtqueue_source.html#l00118">L4virtio::Virtqueue::Desc::len</a>, <a class="el" href="virtqueue_source.html#l00110">L4virtio::Virtqueue::Desc::Flags::next()</a>, <a class="el" href="virtqueue_source.html#l00120">L4virtio::Virtqueue::Desc::next</a>, <a class="el" href="virtqueue_source.html#l00103">L4virtio::Virtqueue::Desc::Flags::raw</a>, <a class="el" href="client_2virtio-block_source.html#l00238">L4virtio::Driver::Device::send_and_wait()</a>, and <a class="el" href="virtqueue_source.html#l00112">L4virtio::Virtqueue::Desc::Flags::write()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Block__device_a63f21e71556accc8c669ef80161ecd8e_cgraph.svg" width="1324" height="366"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a9f1a7a08e90ca6c1441bd48abc8b574a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f1a7a08e90ca6c1441bd48abc8b574a">&#9670;&nbsp;</a></span>process_used_queue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void L4virtio::Driver::Block_device::process_used_queue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process and free all items in the used queue. </p>
<p>If the request has a callback registered it is called after the item has been removed from the queue. </p>

<p class="definition">Definition at line <a class="el" href="client_2virtio-block_source.html#l00646">646</a> of file <a class="el" href="client_2virtio-block_source.html">virtio-block</a>.</p>

<p class="reference">References <a class="el" href="error__helper_source.html#l00068">L4Re::chksys()</a>, <a class="el" href="virtqueue_source.html#l00614">L4virtio::Driver::Virtqueue::find_next_used()</a>, <a class="el" href="err_8h_source.html#l00060">L4_ENOSYS</a>, and <a class="el" href="virtqueue_source.html#l00409">L4virtio::Virtqueue::num()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Block__device_a9f1a7a08e90ca6c1441bd48abc8b574a_cgraph.svg" width="650" height="155"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a2c2e9924abafe2eff34821b166c6c36f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c2e9924abafe2eff34821b166c6c36f">&#9670;&nbsp;</a></span>send_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int L4virtio::Driver::Block_device::send_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classL4virtio_1_1Driver_1_1Block__device_1_1Handle.html">Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process request asynchronously. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td><a class="el" href="classL4virtio_1_1Driver_1_1Block__device_1_1Handle.html" title="Handle to an ongoing request.">Handle</a> to request to send to the device</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">L4_OK</td><td>Request was successfuly scheduled. </td></tr>
    <tr><td class="paramname">-L4_EAGAIN</td><td>No descriptors available. Try again later.</td></tr>
  </table>
  </dd>
</dl>
<p>Sends a request to the driver that was previously set up with <a class="el" href="classL4virtio_1_1Driver_1_1Block__device.html#afdd043c2adbca7fea5eb057f9aa4b483" title="Start the setup of a new request.">start_request()</a> and <a class="el" href="classL4virtio_1_1Driver_1_1Block__device.html#a53ec612b1d207804102e34d51f6016cc" title="Add a data block to a request that has already been set up.">add_block()</a> and wait for it to be executed. </p>

<p class="definition">Definition at line <a class="el" href="client_2virtio-block_source.html#l00560">560</a> of file <a class="el" href="client_2virtio-block_source.html">virtio-block</a>.</p>

<p class="reference">References <a class="el" href="virtqueue_source.html#l00117">L4virtio::Virtqueue::Desc::addr</a>, <a class="el" href="virtqueue_source.html#l00563">L4virtio::Driver::Virtqueue::alloc_descriptor()</a>, <a class="el" href="virtqueue_source.html#l00595">L4virtio::Driver::Virtqueue::desc()</a>, <a class="el" href="virtqueue_source.html#l00119">L4virtio::Virtqueue::Desc::flags</a>, <a class="el" href="err_8h_source.html#l00049">L4_EAGAIN</a>, <a class="el" href="err_8h_source.html#l00043">L4_EOK</a>, <a class="el" href="virtqueue_source.html#l00118">L4virtio::Virtqueue::Desc::len</a>, <a class="el" href="virtqueue_source.html#l00110">L4virtio::Virtqueue::Desc::Flags::next()</a>, <a class="el" href="virtqueue_source.html#l00120">L4virtio::Virtqueue::Desc::next</a>, <a class="el" href="virtqueue_source.html#l00103">L4virtio::Virtqueue::Desc::Flags::raw</a>, <a class="el" href="client_2virtio-block_source.html#l00298">L4virtio::Driver::Device::send()</a>, and <a class="el" href="virtqueue_source.html#l00112">L4virtio::Virtqueue::Desc::Flags::write()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Block__device_a2c2e9924abafe2eff34821b166c6c36f_cgraph.svg" width="878" height="314"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a688df51bdec4ba327a6c0b48a83a115a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a688df51bdec4ba327a6c0b48a83a115a">&#9670;&nbsp;</a></span>setup_device()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void L4virtio::Driver::Block_device::setup_device </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classL4_1_1Cap.html">L4::Cap</a>&lt; <a class="el" href="classL4virtio_1_1Device.html">L4virtio::Device</a> &gt;&#160;</td>
          <td class="paramname"><em>srvcap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arm_2l4_2sys_2l4int_8h.html#a08c1e83a068ded7add134b188cd44967">l4_size_t</a>&#160;</td>
          <td class="paramname"><em>usermem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>userdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classL4virtio_1_1Ptr.html">Ptr</a>&lt; void &gt; &amp;&#160;</td>
          <td class="paramname"><em>user_devaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>fmask0</em> = <code>-1U</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>fmask1</em> = <code>-1U</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Setup a connection to a device and set up shared memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">srvcap</td><td>IPC capability of the channel to the server. </td></tr>
    <tr><td class="paramname">usermem</td><td>Size of additional memory to share with device. </td></tr>
    <tr><td class="paramname">userdata</td><td>Pointer to the region of user-usable memory. </td></tr>
    <tr><td class="paramname">user_devaddr</td><td>Adress of user-usable memory in device address space. </td></tr>
    <tr><td class="paramname">fmask0</td><td>Feature bits 0..31 that the driver supports. </td></tr>
    <tr><td class="paramname">fmask1</td><td>Feature bits 32..63 that the driver supports.</td></tr>
  </table>
  </dd>
</dl>
<p>This function starts a hand shake with the device and sets up the virtqueues for communication and the additional data structures for the block device. It will also allocate and share additional memory that the caller then can use freely, i.e. normally this memory would be used as a reception buffer. The caller may also decide to not make use of this convenience funcion and request 0 bytes in usermem. Then it has to allocate the block buffers for sending/receiving payload manually and share them using <a class="el" href="classL4virtio_1_1Driver_1_1Device.html#a7a5c440b8353e0bd030a552334e7e5a3" title="Share a dataspace with the device.">register_ds()</a>. </p>

<p class="definition">Definition at line <a class="el" href="client_2virtio-block_source.html#l00397">397</a> of file <a class="el" href="client_2virtio-block_source.html">virtio-block</a>.</p>

<p class="reference">References <a class="el" href="virtqueue_source.html#l00329">L4virtio::Virtqueue::avail_offset()</a>, <a class="el" href="error__helper_source.html#l00145">L4Re::chkcap()</a>, <a class="el" href="error__helper_source.html#l00068">L4Re::chksys()</a>, <a class="el" href="client_2virtio-block_source.html#l00203">L4virtio::Driver::Device::config_queue()</a>, <a class="el" href="mem__alloc_source.html#l00073">L4Re::Mem_alloc::Continuous</a>, <a class="el" href="client_2virtio-block_source.html#l00147">L4virtio::Driver::Device::driver_acknowledge()</a>, <a class="el" href="client_2virtio-block_source.html#l00060">L4virtio::Driver::Device::driver_connect()</a>, <a class="el" href="env_source.html#l00103">L4Re::Env::env()</a>, <a class="el" href="virtqueue_source.html#l00527">L4virtio::Driver::Virtqueue::init_queue()</a>, <a class="el" href="err_8h_source.html#l00056">L4_EINVAL</a>, <a class="el" href="err_8h_source.html#l00055">L4_ENODEV</a>, <a class="el" href="arm_2l4_2sys_2consts_8h_source.html#l00037">L4_PAGESHIFT</a>, <a class="el" href="l4_2sys_2consts_8h_source.html#l00389">l4_round_page()</a>, <a class="el" href="l4_2sys_2consts_8h_source.html#l00400">l4_round_size()</a>, <a class="el" href="bitops_8h_source.html#l00299">l4util_bsr()</a>, <a class="el" href="virtio_8h_source.html#l00061">L4VIRTIO_ID_BLOCK</a>, <a class="el" href="ipc__types_source.html#l00634">L4::Ipc::make_cap_rw()</a>, <a class="el" href="client_2virtio-block_source.html#l00221">L4virtio::Driver::Device::max_queue_size()</a>, <a class="el" href="mem__alloc_source.html#l00074">L4Re::Mem_alloc::Pinned</a>, <a class="el" href="client_2virtio-block_source.html#l00187">L4virtio::Driver::Device::register_ds()</a>, <a class="el" href="rm_source.html#l00105">L4Re::Rm::F::Search_addr</a>, <a class="el" href="virtqueue_source.html#l00251">L4virtio::Virtqueue::total_size()</a>, and <a class="el" href="virtqueue_source.html#l00335">L4virtio::Virtqueue::used_offset()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Block__device_a688df51bdec4ba327a6c0b48a83a115a_cgraph.svg" width="895" height="1072"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="afdd043c2adbca7fea5eb057f9aa4b483"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdd043c2adbca7fea5eb057f9aa4b483">&#9670;&nbsp;</a></span>start_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classL4virtio_1_1Driver_1_1Block__device_1_1Handle.html">Handle</a> L4virtio::Driver::Block_device::start_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a>&#160;</td>
          <td class="paramname"><em>sector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Callback&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start the setup of a new request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sector</td><td>First sector to write to/read from. </td></tr>
    <tr><td class="paramname">type</td><td>Request type. </td></tr>
    <tr><td class="paramname">callback</td><td>Function to call, when the request is finished. May be 0 for synchronous requests. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="client_2virtio-block_source.html#l00486">486</a> of file <a class="el" href="client_2virtio-block_source.html">virtio-block</a>.</p>

<p class="reference">References <a class="el" href="virtqueue_source.html#l00117">L4virtio::Virtqueue::Desc::addr</a>, <a class="el" href="virtqueue_source.html#l00563">L4virtio::Driver::Virtqueue::alloc_descriptor()</a>, <a class="el" href="virtqueue_source.html#l00595">L4virtio::Driver::Virtqueue::desc()</a>, <a class="el" href="virtqueue_source.html#l00119">L4virtio::Virtqueue::Desc::flags</a>, <a class="el" href="virtio__block_8h_source.html#l00057">l4virtio_block_header_t::ioprio</a>, <a class="el" href="virtqueue_source.html#l00118">L4virtio::Virtqueue::Desc::len</a>, <a class="el" href="virtqueue_source.html#l00103">L4virtio::Virtqueue::Desc::Flags::raw</a>, <a class="el" href="virtio__block_8h_source.html#l00058">l4virtio_block_header_t::sector</a>, and <a class="el" href="virtio__block_8h_source.html#l00056">l4virtio_block_header_t::type</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classL4virtio_1_1Driver_1_1Block__device_afdd043c2adbca7fea5eb057f9aa4b483_cgraph.svg" width="416" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>l4/l4virtio/client/<a class="el" href="client_2virtio-block_source.html">virtio-block</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceL4virtio.html">L4virtio</a></li><li class="navelem"><b>Driver</b></li><li class="navelem"><a class="el" href="classL4virtio_1_1Driver_1_1Block__device.html">Block_device</a></li>
    <li class="footer">Generated on Sat Jul 17 2021 20:10:09 for L4Re – L4 Runtime Environment by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
