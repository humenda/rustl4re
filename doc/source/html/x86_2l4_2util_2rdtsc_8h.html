<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>L4Re – L4 Runtime Environment: x86/l4/util/rdtsc.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="l4re.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">L4Re – L4 Runtime Environment
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('x86_2l4_2util_2rdtsc_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">rdtsc.h File Reference<div class="ingroups"><a class="el" href="group__l4util__api.html">Utility Functions</a> &raquo; <a class="el" href="group__l4util__tsc.html">Timestamp Counter</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>time stamp counter related functions  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="compiler_8h_source.html">l4/sys/compiler.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="l4_2sys_2l4int_8h_source.html">l4/sys/l4int.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sys_2kip_8h_source.html">l4/sys/kip.h</a>&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for rdtsc.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="x86_2l4_2util_2rdtsc_8h__incl.svg" width="744" height="486"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="x86_2l4_2util_2rdtsc_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae4a71820526e4183fc6b29d244835723"><td class="memItemLeft" align="right" valign="top"><a id="ae4a71820526e4183fc6b29d244835723"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#ae4a71820526e4183fc6b29d244835723">L4_TSC_INIT_AUTO</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ae4a71820526e4183fc6b29d244835723"><td class="mdescLeft">&#160;</td><td class="mdescRight">Automatic init. <br /></td></tr>
<tr class="separator:ae4a71820526e4183fc6b29d244835723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a6af949f000a53d78d142c82630fc0b"><td class="memItemLeft" align="right" valign="top"><a id="a4a6af949f000a53d78d142c82630fc0b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#a4a6af949f000a53d78d142c82630fc0b">L4_TSC_INIT_KERNEL</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a4a6af949f000a53d78d142c82630fc0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialized by kernel. <br /></td></tr>
<tr class="separator:a4a6af949f000a53d78d142c82630fc0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66e5673759b044ce1c725dd36a7476c7"><td class="memItemLeft" align="right" valign="top"><a id="a66e5673759b044ce1c725dd36a7476c7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#a66e5673759b044ce1c725dd36a7476c7">L4_TSC_INIT_CALIBRATE</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:a66e5673759b044ce1c725dd36a7476c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialized by user-level. <br /></td></tr>
<tr class="separator:a66e5673759b044ce1c725dd36a7476c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a560ae83d3afe878e0aaf8a95b987f923"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__l4__basic__types.html#ga6efe5a2c466cba633dbb23611b8eb458">l4_cpu_time_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#a560ae83d3afe878e0aaf8a95b987f923">l4_rdtsc</a> (void)</td></tr>
<tr class="memdesc:a560ae83d3afe878e0aaf8a95b987f923"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read current value of CPU-internal time stamp counter.  <a href="x86_2l4_2util_2rdtsc_8h.html#a560ae83d3afe878e0aaf8a95b987f923">More...</a><br /></td></tr>
<tr class="separator:a560ae83d3afe878e0aaf8a95b987f923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afea4c1b1f4b55ffb19d21b08f39394da"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#afea4c1b1f4b55ffb19d21b08f39394da">l4_rdtsc_32</a> (void)</td></tr>
<tr class="memdesc:afea4c1b1f4b55ffb19d21b08f39394da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the lest significant 32 bit of the TSC.  <a href="x86_2l4_2util_2rdtsc_8h.html#afea4c1b1f4b55ffb19d21b08f39394da">More...</a><br /></td></tr>
<tr class="separator:afea4c1b1f4b55ffb19d21b08f39394da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace01db50dec00f064fc82fc4a9deffa2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#ace01db50dec00f064fc82fc4a9deffa2">l4_rdpmc</a> (int ecx)</td></tr>
<tr class="memdesc:ace01db50dec00f064fc82fc4a9deffa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return current value of CPU-internal performance measurement counter.  <a href="x86_2l4_2util_2rdtsc_8h.html#ace01db50dec00f064fc82fc4a9deffa2">More...</a><br /></td></tr>
<tr class="separator:ace01db50dec00f064fc82fc4a9deffa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6d629ad72a8a123d4fcc186f4c9fbea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#ac6d629ad72a8a123d4fcc186f4c9fbea">l4_rdpmc_32</a> (int ecx)</td></tr>
<tr class="memdesc:ac6d629ad72a8a123d4fcc186f4c9fbea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the least significant 32 bit of a performance counter.  <a href="x86_2l4_2util_2rdtsc_8h.html#ac6d629ad72a8a123d4fcc186f4c9fbea">More...</a><br /></td></tr>
<tr class="separator:ac6d629ad72a8a123d4fcc186f4c9fbea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43706774490b8f9488789573320e8aae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#a43706774490b8f9488789573320e8aae">l4_tsc_to_ns</a> (<a class="el" href="group__l4__basic__types.html#ga6efe5a2c466cba633dbb23611b8eb458">l4_cpu_time_t</a> tsc)</td></tr>
<tr class="memdesc:a43706774490b8f9488789573320e8aae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert time stamp to ns value.  <a href="x86_2l4_2util_2rdtsc_8h.html#a43706774490b8f9488789573320e8aae">More...</a><br /></td></tr>
<tr class="separator:a43706774490b8f9488789573320e8aae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a515e82cb08b27c33286632b4630e4117"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#a515e82cb08b27c33286632b4630e4117">l4_tsc_to_us</a> (<a class="el" href="group__l4__basic__types.html#ga6efe5a2c466cba633dbb23611b8eb458">l4_cpu_time_t</a> tsc)</td></tr>
<tr class="memdesc:a515e82cb08b27c33286632b4630e4117"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert time stamp into micro seconds value.  <a href="x86_2l4_2util_2rdtsc_8h.html#a515e82cb08b27c33286632b4630e4117">More...</a><br /></td></tr>
<tr class="separator:a515e82cb08b27c33286632b4630e4117"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17b01a4deb0748cb8e3c32eb1f9fa53c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#a17b01a4deb0748cb8e3c32eb1f9fa53c">l4_tsc_to_s_and_ns</a> (<a class="el" href="group__l4__basic__types.html#ga6efe5a2c466cba633dbb23611b8eb458">l4_cpu_time_t</a> tsc, <a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> *s, <a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> *ns)</td></tr>
<tr class="memdesc:a17b01a4deb0748cb8e3c32eb1f9fa53c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert time stamp to s.ns value.  <a href="x86_2l4_2util_2rdtsc_8h.html#a17b01a4deb0748cb8e3c32eb1f9fa53c">More...</a><br /></td></tr>
<tr class="separator:a17b01a4deb0748cb8e3c32eb1f9fa53c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aee7e04f45212bea302d72e1496262b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__l4__basic__types.html#ga6efe5a2c466cba633dbb23611b8eb458">l4_cpu_time_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#a8aee7e04f45212bea302d72e1496262b">l4_ns_to_tsc</a> (<a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> ns)</td></tr>
<tr class="memdesc:a8aee7e04f45212bea302d72e1496262b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert nano seconds into CPU ticks.  <a href="x86_2l4_2util_2rdtsc_8h.html#a8aee7e04f45212bea302d72e1496262b">More...</a><br /></td></tr>
<tr class="separator:a8aee7e04f45212bea302d72e1496262b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad36e512741c07634ab67562ff7052543"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#ad36e512741c07634ab67562ff7052543">l4_busy_wait_ns</a> (<a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> ns)</td></tr>
<tr class="memdesc:ad36e512741c07634ab67562ff7052543"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait busy for a small amount of time.  <a href="x86_2l4_2util_2rdtsc_8h.html#ad36e512741c07634ab67562ff7052543">More...</a><br /></td></tr>
<tr class="separator:ad36e512741c07634ab67562ff7052543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6a2848f2fb0249ac87b87053e34ebbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#ab6a2848f2fb0249ac87b87053e34ebbe">l4_busy_wait_us</a> (<a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> us)</td></tr>
<tr class="memdesc:ab6a2848f2fb0249ac87b87053e34ebbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait busy for a small amount of time.  <a href="x86_2l4_2util_2rdtsc_8h.html#ab6a2848f2fb0249ac87b87053e34ebbe">More...</a><br /></td></tr>
<tr class="separator:ab6a2848f2fb0249ac87b87053e34ebbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa74c42ca03d6c73db1cbdd28486616cf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#aa74c42ca03d6c73db1cbdd28486616cf">l4_calibrate_tsc</a> (<a class="el" href="structl4__kernel__info__t.html">l4_kernel_info_t</a> *kip)</td></tr>
<tr class="memdesc:aa74c42ca03d6c73db1cbdd28486616cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calibrate scalers for time stamp calculations.  <a href="x86_2l4_2util_2rdtsc_8h.html#aa74c42ca03d6c73db1cbdd28486616cf">More...</a><br /></td></tr>
<tr class="separator:aa74c42ca03d6c73db1cbdd28486616cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9183b18a3b6423ed7eed1033788bdd18"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#a9183b18a3b6423ed7eed1033788bdd18">l4_tsc_init</a> (int constraint, <a class="el" href="structl4__kernel__info__t.html">l4_kernel_info_t</a> *kip)</td></tr>
<tr class="memdesc:a9183b18a3b6423ed7eed1033788bdd18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize scaler for TSC calibrations.  <a href="x86_2l4_2util_2rdtsc_8h.html#a9183b18a3b6423ed7eed1033788bdd18">More...</a><br /></td></tr>
<tr class="separator:a9183b18a3b6423ed7eed1033788bdd18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a266c344d6613a7dde4a2c7de29fb10e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#a266c344d6613a7dde4a2c7de29fb10e5">l4_get_hz</a> (void)</td></tr>
<tr class="memdesc:a266c344d6613a7dde4a2c7de29fb10e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get CPU frequency in Hz.  <a href="x86_2l4_2util_2rdtsc_8h.html#a266c344d6613a7dde4a2c7de29fb10e5">More...</a><br /></td></tr>
<tr class="separator:a266c344d6613a7dde4a2c7de29fb10e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>time stamp counter related functions </p>
<dl class="section author"><dt>Author</dt><dd>Frank Mehnert <a href="#" onclick="location.href='mai'+'lto:'+'fm3'+'@o'+'s.i'+'nf'+'.tu'+'-d'+'res'+'de'+'n.d'+'e'; return false;">fm3@o<span style="display: none;">.nosp@m.</span>s.in<span style="display: none;">.nosp@m.</span>f.tu-<span style="display: none;">.nosp@m.</span>dres<span style="display: none;">.nosp@m.</span>den.d<span style="display: none;">.nosp@m.</span>e</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html">rdtsc.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ad36e512741c07634ab67562ff7052543"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad36e512741c07634ab67562ff7052543">&#9670;&nbsp;</a></span>l4_busy_wait_ns()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void l4_busy_wait_ns </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a>&#160;</td>
          <td class="paramname"><em>ns</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait busy for a small amount of time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ns</td><td>nano seconds to wait </td></tr>
  </table>
  </dd>
</dl>
<dl class="section attention"><dt>Attention</dt><dd>Not intended for any use! </dd></dl>

<p class="definition">Definition at line <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html#l00345">345</a> of file <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html">rdtsc.h</a>.</p>

<p class="reference">References <a class="el" href="amd64_2l4_2util_2rdtsc_8h_source.html#l00305">l4_ns_to_tsc()</a>, and <a class="el" href="amd64_2l4_2util_2rdtsc_8h_source.html#l00187">l4_rdtsc()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="x86_2l4_2util_2rdtsc_8h_ad36e512741c07634ab67562ff7052543_cgraph.svg" width="291" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ab6a2848f2fb0249ac87b87053e34ebbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6a2848f2fb0249ac87b87053e34ebbe">&#9670;&nbsp;</a></span>l4_busy_wait_us()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void l4_busy_wait_us </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a>&#160;</td>
          <td class="paramname"><em>us</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait busy for a small amount of time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">us</td><td>micro seconds to wait </td></tr>
  </table>
  </dd>
</dl>
<dl class="section attention"><dt>Attention</dt><dd>Not intendet for any use! </dd></dl>

<p class="definition">Definition at line <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html#l00355">355</a> of file <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html">rdtsc.h</a>.</p>

<p class="reference">References <a class="el" href="amd64_2l4_2util_2rdtsc_8h_source.html#l00305">l4_ns_to_tsc()</a>, and <a class="el" href="amd64_2l4_2util_2rdtsc_8h_source.html#l00187">l4_rdtsc()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="x86_2l4_2util_2rdtsc_8h_ab6a2848f2fb0249ac87b87053e34ebbe_cgraph.svg" width="291" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aa74c42ca03d6c73db1cbdd28486616cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa74c42ca03d6c73db1cbdd28486616cf">&#9670;&nbsp;</a></span>l4_calibrate_tsc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> l4_calibrate_tsc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structl4__kernel__info__t.html">l4_kernel_info_t</a> *&#160;</td>
          <td class="paramname"><em>kip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calibrate scalers for time stamp calculations. </p>
<p>Determine some scalers to be able to convert between real time and CPU ticks. This test uses channel 0 of the PIT (i8254) or the kernel KIP, depending on availability. Just calls l4_tsc_init(L4_TSC_INIT_AUTO). </p>

<p class="definition">Definition at line <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html#l00183">183</a> of file <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html">rdtsc.h</a>.</p>

<p class="reference">References <a class="el" href="amd64_2l4_2util_2rdtsc_8h.html#a9183b18a3b6423ed7eed1033788bdd18">l4_tsc_init()</a>, and <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html#l00041">L4_TSC_INIT_AUTO</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="x86_2l4_2util_2rdtsc_8h_aa74c42ca03d6c73db1cbdd28486616cf_cgraph.svg" width="271" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a266c344d6613a7dde4a2c7de29fb10e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a266c344d6613a7dde4a2c7de29fb10e5">&#9670;&nbsp;</a></span>l4_get_hz()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> l4_get_hz </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get CPU frequency in Hz. </p>
<dl class="section return"><dt>Returns</dt><dd>frequency in Hz </dd></dl>

</div>
</div>
<a id="a8aee7e04f45212bea302d72e1496262b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aee7e04f45212bea302d72e1496262b">&#9670;&nbsp;</a></span>l4_ns_to_tsc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__l4__basic__types.html#ga6efe5a2c466cba633dbb23611b8eb458">l4_cpu_time_t</a> l4_ns_to_tsc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a>&#160;</td>
          <td class="paramname"><em>ns</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert nano seconds into CPU ticks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ns</td><td>nano seconds </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CPU ticks </dd></dl>

<p class="definition">Definition at line <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html#l00321">321</a> of file <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html">rdtsc.h</a>.</p>

</div>
</div>
<a id="ace01db50dec00f064fc82fc4a9deffa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace01db50dec00f064fc82fc4a9deffa2">&#9670;&nbsp;</a></span>l4_rdpmc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> l4_rdpmc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ecx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return current value of CPU-internal performance measurement counter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ecx</td><td>ECX value for the rdpmc instruction. For details see the Intel IA-32 Architectures Software Developer's Manual. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>64-bit PMC </dd></dl>

<p class="definition">Definition at line <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html#l00222">222</a> of file <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html">rdtsc.h</a>.</p>

</div>
</div>
<a id="ac6d629ad72a8a123d4fcc186f4c9fbea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6d629ad72a8a123d4fcc186f4c9fbea">&#9670;&nbsp;</a></span>l4_rdpmc_32()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> l4_rdpmc_32 </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ecx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the least significant 32 bit of a performance counter. </p>
<p>Useful for smaller differences, needs less cycles. </p>

<p class="definition">Definition at line <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html#l00239">239</a> of file <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html">rdtsc.h</a>.</p>

</div>
</div>
<a id="a560ae83d3afe878e0aaf8a95b987f923"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a560ae83d3afe878e0aaf8a95b987f923">&#9670;&nbsp;</a></span>l4_rdtsc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__l4__basic__types.html#ga6efe5a2c466cba633dbb23611b8eb458">l4_cpu_time_t</a> l4_rdtsc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read current value of CPU-internal time stamp counter. </p>
<dl class="section return"><dt>Returns</dt><dd>64-bit time stamp </dd></dl>

<p class="definition">Definition at line <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html#l00189">189</a> of file <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html">rdtsc.h</a>.</p>

</div>
</div>
<a id="afea4c1b1f4b55ffb19d21b08f39394da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afea4c1b1f4b55ffb19d21b08f39394da">&#9670;&nbsp;</a></span>l4_rdtsc_32()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> l4_rdtsc_32 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the lest significant 32 bit of the TSC. </p>
<p>Useful for smaller differences, needs less cycles. </p>

<p class="definition">Definition at line <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html#l00208">208</a> of file <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html">rdtsc.h</a>.</p>

</div>
</div>
<a id="a9183b18a3b6423ed7eed1033788bdd18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9183b18a3b6423ed7eed1033788bdd18">&#9670;&nbsp;</a></span>l4_tsc_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> l4_tsc_init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>constraint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structl4__kernel__info__t.html">l4_kernel_info_t</a> *&#160;</td>
          <td class="paramname"><em>kip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize scaler for TSC calibrations. </p>
<p>Initialize the scalers needed by <a class="el" href="amd64_2l4_2util_2rdtsc_8h.html#a43706774490b8f9488789573320e8aae" title="Convert time stamp to ns value.">l4_tsc_to_ns()</a>/l4_ns_to_tsc() and so on. Current versions of Fiasco export these scalers from kernel into userland. The programmer may decide whether he allows to use these scalers or if an calibration should be performed. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">constraint</td><td>programmers constraint:<ul>
<li><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#ae4a71820526e4183fc6b29d244835723" title="Automatic init.">L4_TSC_INIT_AUTO</a> if the kernel exports the scalers then use them. If not, perform calibration using channel 0 of the PIT (i8254). The latter case may lead into short (unpredictable) periods where interrupts are disabled.</li>
<li><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#a4a6af949f000a53d78d142c82630fc0b" title="Initialized by kernel.">L4_TSC_INIT_KERNEL</a> depend on retrieving the scalers from kernel. If the scalers are not available, return 0.</li>
<li><a class="el" href="x86_2l4_2util_2rdtsc_8h.html#a66e5673759b044ce1c725dd36a7476c7" title="Initialized by user-level.">L4_TSC_INIT_CALIBRATE</a> Ignore possible scalers exported by the scaler, instead insist on calibration using the PIT. </li>
</ul>
</td></tr>
    <tr><td class="paramname">kip</td><td>KIP pointer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on error (no scalers exported by kernel, calibrating failed ...) otherwise returns (2^32 / (tsc per µsec)). This value has the same semantics as the value returned by the calibrate_delay_loop() function of the Linux kernel. </dd></dl>

</div>
</div>
<a id="a43706774490b8f9488789573320e8aae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43706774490b8f9488789573320e8aae">&#9670;&nbsp;</a></span>l4_tsc_to_ns()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> l4_tsc_to_ns </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#ga6efe5a2c466cba633dbb23611b8eb458">l4_cpu_time_t</a>&#160;</td>
          <td class="paramname"><em>tsc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert time stamp to ns value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tsc</td><td>time value in CPU ticks </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>time value in ns </dd></dl>

<p class="definition">Definition at line <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html#l00253">253</a> of file <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html">rdtsc.h</a>.</p>

</div>
</div>
<a id="a17b01a4deb0748cb8e3c32eb1f9fa53c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17b01a4deb0748cb8e3c32eb1f9fa53c">&#9670;&nbsp;</a></span>l4_tsc_to_s_and_ns()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void l4_tsc_to_s_and_ns </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#ga6efe5a2c466cba633dbb23611b8eb458">l4_cpu_time_t</a>&#160;</td>
          <td class="paramname"><em>tsc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#gac1d09f3e382e711b776931f10e6e1e5a">l4_uint32_t</a> *&#160;</td>
          <td class="paramname"><em>ns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert time stamp to s.ns value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tsc</td><td>time value in CPU ticks </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">s</td><td>seconds </td></tr>
    <tr><td class="paramname">ns</td><td>nano seconds </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html#l00299">299</a> of file <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html">rdtsc.h</a>.</p>

</div>
</div>
<a id="a515e82cb08b27c33286632b4630e4117"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a515e82cb08b27c33286632b4630e4117">&#9670;&nbsp;</a></span>l4_tsc_to_us()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__l4__basic__types.html#gaf3331c485014bd12a9e4f9d27a55e689">l4_uint64_t</a> l4_tsc_to_us </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__l4__basic__types.html#ga6efe5a2c466cba633dbb23611b8eb458">l4_cpu_time_t</a>&#160;</td>
          <td class="paramname"><em>tsc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert time stamp into micro seconds value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tsc</td><td>time value in CPU ticks </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>time value in micro seconds </dd></dl>

<p class="definition">Definition at line <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html#l00277">277</a> of file <a class="el" href="x86_2l4_2util_2rdtsc_8h_source.html">rdtsc.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d979004d17f5223e5cbcd0eb3b9cd5ac.html">x86</a></li><li class="navelem"><a class="el" href="dir_3fa9cbe562e25975b065e1d6353565fc.html">l4</a></li><li class="navelem"><a class="el" href="dir_f31abfcd54d5dc7edf16e72e22fbbfa1.html">util</a></li><li class="navelem"><a class="el" href="x86_2l4_2util_2rdtsc_8h.html">rdtsc.h</a></li>
    <li class="footer">Generated on Sat Jul 17 2021 20:10:08 for L4Re – L4 Runtime Environment by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
